More loops and functions and other nerdy stuff